// 1. Модель данных (Entity Framework Core)
public class LW23Game
{
    public int IdGame { get; set; }
    // ... другие поля
    public string? logoFile { get; set; } // Добавленное поле
}

// 2. Логика обработки сохранения (например, в обработчике кнопки "Сохранить")
public void SaveLogo(int gameId, string sourceFilePath)
{
    // A. Копирование файла в целевую папку
    string targetDirectory = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "GamesLogo");
    if (!Directory.Exists(targetDirectory))
    {
        Directory.CreateDirectory(targetDirectory);
    }

    string fileName = Path.GetFileName(sourceFilePath);
    string targetFilePath = Path.Combine(targetDirectory, fileName);

    try
    {
        // Выполняем копирование
        File.Copy(sourceFilePath, targetFilePath, overwrite: true);

        // B. Запись имени файла в БД с помощью EF Core
        using (var context = new YourDbContext()) // Замените на имя вашего DbContext
        {
            var game = context.LW23Games.FirstOrDefault(g => g.IdGame == gameId);
            if (game != null)
            {
                game.logoFile = fileName; // Записываем только имя файла
                context.SaveChanges();
            }
        }
        MessageBox.Show($"Логотип успешно сохранен и привязан к игре {fileName}");
    }
    catch (Exception ex)
    {
        MessageBox.Show($"Ошибка при сохранении: {ex.Message}");
    }
}








Конечно! Вот пошаговая реализация пользовательского интерфейса (UI) и логики для задания 3.1 в приложении WPF с использованием Entity Framework Core.
Для работы кода вам нужно, чтобы ваш проект имел:
 * Установленные пакеты Microsoft.EntityFrameworkCore.Tools и соответствующий провайдер (например, .SqlServer).
 * Определенный класс сущности LW23Game с полем logoFile.
 * Определенный класс контекста базы данных (YourDbContext).
1. XAML-разметка (MainWindow.xaml)
Эта разметка создает простой интерфейс с выпадающим списком для выбора игры, полем для пути к файлу и кнопками "Обзор..." и "Сохранить".
<Window x:Class="LabWork23.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Задание 3.1: Импорт логотипов" Height="250" Width="500"
        Loaded="Window_Loaded">
    
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <Label Content="Выберите игру:" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center"/>
        <ComboBox Name="GameComboBox" 
                  Grid.Row="0" Grid.Column="1" 
                  DisplayMemberPath="name"       
                  SelectedValuePath="IdGame" 
                  Margin="5" />

        <Label Content="Путь к файлу логотипа:" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center"/>
        <StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal" Margin="5">
            <TextBox Name="LogoPathTextBox" Width="250" IsReadOnly="True" Margin="0,0,10,0"/>
            <Button Content="Обзор..." Click="BrowseButton_Click" Padding="10,0"/>
        </StackPanel>

        <Button Content="Сохранить" 
                Grid.Row="3" Grid.ColumnSpan="2" 
                HorizontalAlignment="Left" 
                Click="SaveButton_Click" 
                Margin="0,20,0,0" 
                Padding="20,8"/>
    </Grid>
</Window>

2. C#-логика (MainWindow.xaml.cs)
Вам потребуется добавить using для работы с файлами и EF Core, а также использовать стандартный для WPF класс OpenFileDialog из пространства имен Microsoft.Win32.
using System;
using System.IO;
using System.Linq;
using System.Windows;
using Microsoft.Win32;
// using YourProject.Data; // Убедитесь, что здесь указан нужный namespace для DbContext
// using YourProject.Models; // Убедитесь, что здесь указан нужный namespace для LW23Game

namespace LabWork23 
{
    // Замените эти классы на ваши реальные классы DbContext и сущности LW23Game
    // Примерная структура класса LW23Game:
    /*
    public class LW23Game
    {
        public int IdGame { get; set; }
        public string name { get; set; }
        // ... другие поля
        public string? logoFile { get; set; } 
    }
    */
    
    public partial class MainWindow : Window
    {
        // Создайте экземпляр вашего DbContext
        private readonly YourDbContext _context = new YourDbContext(); 

        public MainWindow()
        {
            InitializeComponent();
        }

        // Загрузка данных при старте окна
        private void Window_Loaded(object sender, RoutedEventArgs e)
        {
            LoadGames();
        }

        private void LoadGames()
        {
            try
            {
                // Загрузка всех игр и привязка к ComboBox
                var games = _context.LW23Games.ToList();
                GameComboBox.ItemsSource = games;
                // DisplayMemberPath и SelectedValuePath установлены в XAML
            }
            catch (Exception ex)
            {
                MessageBox.Show($"Ошибка загрузки игр: {ex.Message}", "Ошибка БД", MessageBoxButton.OK, MessageBoxImage.Error);
            }
        }

        // Обработчик кнопки "Обзор..."
        private void BrowseButton_Click(object sender, RoutedEventArgs e)
        {
            OpenFileDialog openFileDialog = new OpenFileDialog
            {
                Filter = "Файлы изображений|*.jpg;*.jpeg;*.png;*.gif",
                Title = "Выберите файл логотипа для игры"
            };

            // ShowDialog() в WPF возвращает bool?
            if (openFileDialog.ShowDialog() == true) 
            {
                LogoPathTextBox.Text = openFileDialog.FileName;
            }
        }

        // Обработчик кнопки "Сохранить" (Основная логика 3.1.3)
        private void SaveButton_Click(object sender, RoutedEventArgs e)
        {
            // 1. Проверка ввода
            if (GameComboBox.SelectedValue == null)
            {
                MessageBox.Show("Пожалуйста, выберите игру.", "Ошибка", MessageBoxButton.OK, MessageBoxImage.Error);
                return;
            }
            string sourceFilePath = LogoPathTextBox.Text;
            if (string.IsNullOrWhiteSpace(sourceFilePath) || !File.Exists(sourceFilePath))
            {
                MessageBox.Show("Пожалуйста, выберите существующий файл логотипа.", "Ошибка", MessageBoxButton.OK, MessageBoxImage.Error);
                return;
            }

            int selectedGameId = (int)GameComboBox.SelectedValue;
            string fileName = Path.GetFileName(sourceFilePath);

            // 2. Эмуляция загрузки: определение и создание целевой папки
            // BaseDirectory указывает на папку, где находится исполняемый файл приложения
            string targetDirectory = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "GamesLogo");
            string targetFilePath = Path.Combine(targetDirectory, fileName);

            try
            {
                // Создание папки, если она не существует
                if (!Directory.Exists(targetDirectory))
                {
                    Directory.CreateDirectory(targetDirectory);
                }

                // Копирование файла (эмуляция загрузки на сервер/хранилище)
                File.Copy(sourceFilePath, targetFilePath, overwrite: true);

                // 3. Обновление записи в БД
                var gameToUpdate = _context.LW23Games.Find(selectedGameId);

                if (gameToUpdate != null)
                {
                    // Запись имени файла в поле logoFile
                    gameToUpdate.logoFile = fileName; 
                    _context.SaveChanges();
                    
                    MessageBox.Show($"Логотип '{fileName}' успешно загружен и привязан к игре.", "Успех", MessageBoxButton.OK, MessageBoxImage.Information);
                }
            }
            catch (Exception ex)
            {
                // Обработка ошибок копирования или сохранения в БД
                MessageBox.Show($"Произошла ошибка при сохранении: {ex.Message}", "Ошибка", MessageBoxButton.OK, MessageBoxImage.Error);
            }
        }
    }
}


